<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airflow Certification Practice | FKTI</title>
    <link rel="stylesheet" href="../css/fkti-light-theme.css">
    <style>
        .page-header {
            text-align: center;
            padding: 60px 20px 32px;
            border-bottom: 1px solid #e5e5e5;
        }
        .logo-text { font-size: 11px; font-weight: 600; letter-spacing: 0.5px; color: #86868b; margin-bottom: 16px; }
        .page-header h1 { font-size: 28px; font-weight: 600; color: #1d1d1f; margin-bottom: 8px; }
        .page-header p { font-size: 15px; color: #86868b; }
        
        .content { max-width: 720px; margin: 0 auto; padding: 32px 20px 60px; }
        
        .question {
            background: white;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
        }
        .q-meta { display: flex; gap: 8px; margin-bottom: 12px; align-items: center; }
        .q-num {
            font-size: 11px;
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            padding: 3px 10px;
            border-radius: 12px;
        }
        .q-cat {
            font-size: 10px;
            color: #6e6e73;
            background: #f5f5f7;
            padding: 3px 8px;
            border-radius: 10px;
        }
        .q-text { font-size: 14px; color: #1d1d1f; margin-bottom: 16px; line-height: 1.6; }
        .q-text pre {
            background: #f5f5f7;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            overflow-x: auto;
            margin: 8px 0;
            font-family: 'SF Mono', Menlo, monospace;
        }
        
        .options { display: flex; flex-direction: column; gap: 8px; }
        .opt {
            display: flex;
            align-items: center;
            padding: 12px 14px;
            background: #f9fafb;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.15s;
        }
        .opt:hover { background: #f0f9ff; border-color: #3b82f6; }
        .opt input { margin-right: 10px; accent-color: #3b82f6; }
        
        .hint-toggle {
            margin-top: 12px;
            background: none;
            border: none;
            color: #3b82f6;
            font-size: 12px;
            cursor: pointer;
            font-family: inherit;
        }
        .hint-toggle:hover { text-decoration: underline; }
        .hint {
            display: none;
            margin-top: 10px;
            padding: 12px;
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 8px;
            font-size: 12px;
            color: #92400e;
            line-height: 1.5;
        }
        .hint.show { display: block; }
        
        .quiz-actions {
            position: sticky;
            bottom: 0;
            background: rgba(251,251,253,0.95);
            backdrop-filter: blur(10px);
            padding: 16px 0;
            border-top: 1px solid #e5e5e5;
            display: flex;
            justify-content: center;
            gap: 12px;
        }
        .btn {
            padding: 10px 24px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            font-family: inherit;
            border: none;
            transition: all 0.2s;
        }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-secondary { background: #f5f5f7; color: #1d1d1f; border: 1px solid #e5e5e5; }
        .btn-secondary:hover { background: #e5e5e5; }
        
        .results {
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-radius: 12px;
            margin-bottom: 24px;
            display: none;
        }
        .results.show { display: block; }
        .score { font-size: 48px; font-weight: 700; color: #166534; }
        .score-msg { font-size: 15px; color: #166534; margin-top: 4px; }
        
        @media (max-width: 600px) {
            .page-header { padding: 40px 16px 24px; }
            .content { padding: 20px 16px 80px; }
            .question { padding: 16px; }
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav id="navbar">
        <div class="container" style="justify-content: flex-start;">
            <a href="../index.html" class="nav-btn">Home</a>
            <a href="hub.html" class="nav-btn">Course Hub</a>
            <a href="certification-hub.html" class="nav-btn">‚Üê Back</a>
            <span class="nav-btn active">Practice Mode</span>
        </div>
    </nav>

    <div class="page-header">
        <div class="logo-text">FKTI ¬∑ AIRFLOW CERTIFICATION</div>
        <h1>Practice Questions</h1>
        <p>75 Questions ¬∑ Test your knowledge</p>
    </div>

    <div class="content">
        <div class="results" id="results">
            <div class="score" id="score">0%</div>
            <div class="score-msg" id="score-msg">Keep practicing!</div>
        </div>
        
        <div id="questions"></div>
    </div>

    <div class="quiz-actions">
        <button class="btn btn-primary" onclick="submitQuiz()">Submit Quiz</button>
        <button class="btn btn-secondary" onclick="resetQuiz()">Reset</button>
    </div>

    <script>
        const questions = [
            { id: 1, q: "Assume an Airflow variable with the name airtable_api_key was created via the Airflow UI. Will the variable's value be hidden on the Airflow UI?", opts: ["Yes", "No"], cat: "Variables", hint: "Airflow masks variables containing sensitive keywords like 'api_key', 'password', 'secret' in their names." },
            { id: 2, q: "Is this the correct way to create a PostgreSQL connection?\n\nAIRFLOW_CONN_POSTGRES='my-conn-type://login:password@host:port/schema'", opts: ["Yes", "No"], cat: "Connections", hint: "Check if 'my-conn-type' is a valid connection type for PostgreSQL." },
            { id: 3, q: "What is a DAG run?", opts: ["A special Airflow object that determines the schedule of a DAG", "A specific run or instance of a task", "A specific run or instance of a DAG", "An object grouping all DAGs"], cat: "Core Concepts", hint: "Think about what happens when a DAG is triggered or scheduled to execute." },
            { id: 4, q: "With [task_a(), task_b()] >> task_e() and [task_c(), task_d()] >> task_e(), how many tasks run at the same time?", opts: ["4", "1", "0", "2"], cat: "Dependencies", hint: "Consider which tasks have no upstream dependencies." },
            { id: 5, q: "Which feature allows tasks to communicate and share data?", opts: ["Variables", "Connections", "XCom", "Hooks"], cat: "Core Concepts", hint: "This feature's name suggests cross-communication between tasks." },
            { id: 6, q: "With @daily schedule and catchup=True, how far back will Airflow catch up?", opts: ["To the beginning of time", "One week", "One month", "To the DAG's start_date"], cat: "Scheduling", hint: "Catchup creates runs for all missed intervals since a specific date parameter." },
            { id: 7, q: "A Python script downloads data from an API and stores it daily. Is this a use case for Airflow?", opts: ["Yes", "No"], cat: "Use Cases", hint: "Airflow excels at scheduling recurring data tasks." },
            { id: 8, q: "Which parameter limits a DAG to run only for the next two months?", opts: ["start_date", "schedule", "end_date", "catchup"], cat: "DAG Parameters", hint: "Think about which parameter would stop scheduling after a certain point." },
            { id: 9, q: "A new task doesn't appear in the UI after saving. Why?", opts: ["The schedule parameter is missing", "The task dependency setup is incorrect", "Airflow has a default delay of up to 30 seconds", "Airflow has a default delay of up to 5 minutes"], cat: "Troubleshooting", hint: "Airflow re-parses existing DAG files at a certain interval." },
            { id: 10, q: "What is the role of the executor?", opts: ["It deletes unwanted tasks", "It defines how tasks are executed and on which system", "It executes tasks", "It schedules tasks"], cat: "Architecture", hint: "Different executors include Local, Celery, and Kubernetes." },
            { id: 11, q: "Which mode is best when poke_interval > 5 minutes?", opts: ["reschedule", "poke"], cat: "Sensors", hint: "For long intervals, it's better to release the worker slot between checks." },
            { id: 12, q: "Schedule for every 10 minutes, but not on weekends?", opts: ["schedule='/10 * * * *'", "schedule='*/10 * * * 1-5'", "schedule=timedelta(minutes=10)", "schedule='*/10 * * * M-F'"], cat: "Scheduling", hint: "Use cron notation where 1-5 represents Monday-Friday." },
            { id: 13, q: "Which are valid schedule values? (select all that apply)", opts: ["Timedelta", "Integers", "Calendar", "Cron"], cat: "Scheduling", hint: "Airflow accepts Cron strings, Timedelta objects, and Timetables." },
            { id: 14, q: "A new DAG file doesn't show up. Why? (select all that apply)", opts: ["The code doesn't contain 'airflow' or 'dag'", "The Airflow instance must be restarted", "5 minute default delay", "The .airflowignore file has the name"], cat: "Troubleshooting", hint: "Airflow scans for certain keywords and has delays for new files." },
            { id: 15, q: "What is the default value for start_date?", opts: ["datetime.now()", "datetime(2020, 1, 1)", "None", "Yesterday"], cat: "DAG Parameters", hint: "Without explicitly setting this, the DAG won't have a defined start." },
            { id: 16, q: "Which sets start date to 2025/01/01?", opts: ["start_date=datetime(2025, 1, 1)", "schedule=datetime(2025, 1, 1)", "start_date=datetime(1, 1, 2025)", "start_date='2025/01/01'"], cat: "DAG Parameters", hint: "datetime() takes year, month, day in that order." },
            { id: 17, q: "Daily DAG at 00:00, start_date Jan 1, 2025. What's the first logical_date?", opts: ["2025/01/01 00:00", "2025/01/02 00:00", "2025/01/01 00:01", "2025/01/02 23:59"], cat: "Scheduling", hint: "logical_date represents the start of the data interval being processed." },
            { id: 18, q: "XCom limitations? (select all that apply)", opts: ["XComs are the only way to share data", "Requires a defined DAG with at least one task", "Data size is limited", "Max 2 tasks can use XCom"], cat: "XCom", hint: "XCom data is stored in the metadata database, which has size constraints." },
            { id: 19, q: "How to avoid dag=dag in all operators? (select all that apply)", opts: ["Using @dag decorator", "Giving all tasks the same task_id", "Using 'with DAG()' context manager", "Creating default_argument dictionary"], cat: "DAG Definition", hint: "Some approaches automatically associate tasks with the DAG." },
            { id: 20, q: "What is the default timezone in Airflow?", opts: ["Local timezone", "EST", "UTC", "PST"], cat: "Configuration", hint: "Airflow uses a universal standard timezone by default." },
            { id: 21, q: "What is the typical task journey?", opts: ["No status ‚Üí Scheduled ‚Üí Queued ‚Üí Running ‚Üí Success/Failure", "Queued ‚Üí Scheduled ‚Üí Running ‚Üí Success/Failure", "No status ‚Üí Queued ‚Üí Scheduled ‚Üí Running ‚Üí Success/Failure", "Scheduled ‚Üí Queued ‚Üí Running ‚Üí Success/Failure"], cat: "Core Concepts", hint: "Tasks start with no status, then go through scheduling before execution." },
            { id: 22, q: "DAG missing start_date, task/dag not called. What are the issues? (select all)", opts: ["start_date missing", "tags missing", "Task not called", "DAG not called"], cat: "Troubleshooting", hint: "start_date is required, and decorated functions must be called." },
            { id: 23, q: "Purpose of task dependencies?", opts: ["Ensure correct execution order", "Reduce task failures", "Increase parallelism", "Improve scheduler performance"], cat: "Dependencies", hint: "Dependencies control the sequence in which tasks run." },
            { id: 24, q: "What is XCom?", opts: ["A real-time communication protocol", "A way to store data between tasks", "A data serialization tool", "A type of task"], cat: "XCom", hint: "XCom enables tasks to share information." },
            { id: 25, q: "Default sensor timeout?", opts: ["7 hours", "7 days", "1 day", "1 minute"], cat: "Sensors", hint: "The default timeout is measured in days, not hours." },
            { id: 26, q: "What does the bar chart show in DAGs view?", opts: ["Future DAG runs", "Previous DAG runs only", "Task instances with states", "Past and current DAG runs with states"], cat: "UI", hint: "The bar chart visualizes the history of DAG executions." },
            { id: 27, q: "Why doesn't the DAG show up? (my_dag function not called)", opts: ["my_dag isn't called", "schedule missing", "catchup missing", "start_date format wrong"], cat: "Troubleshooting", hint: "When using decorators, you must invoke the function." },
            { id: 28, q: "Jan 4, start_date Jan 1, @daily, default catchup. How many DAG runs?", opts: ["4", "1", "0", "2"], cat: "Scheduling", hint: "Count the completed intervals from Jan 1 to Jan 4." },
            { id: 29, q: "Which parameter defines when scheduling starts?", opts: ["schedule", "end_date", "start_date", "dag_id"], cat: "DAG Parameters", hint: "This parameter sets the beginning of the scheduling timeline." },
            { id: 30, q: "Which creates t0 ‚Üí t1 ‚Üí t2 ‚Üí t3?", opts: ["[t0, t1] >> [t2, t3]", "[t0, t1] >> t2 >> t3", "t0 >> t1 >> t2 >> t3", "t0 >> t1 >> [t2, t3]"], cat: "Dependencies", hint: "For a linear sequence, each task should follow the previous one directly." },
            { id: 31, q: "Valid ways to create a pipeline? (select all)", opts: ["Using with DAG()", "Using DAG class with dag parameter", "Creating a function called DAG", "Using @dag decorator"], cat: "DAG Definition", hint: "There are multiple valid approaches: decorators, context managers, and explicit assignment." },
            { id: 32, q: "Can you backfill with catchup=False?", opts: ["No, impossible", "Yes, with UI, API, or CLI"], cat: "Backfill", hint: "catchup=False only prevents automatic backfilling." },
            { id: 33, q: "Would task_a() >> task_b (missing parentheses) work?", opts: ["Yes", "No"], cat: "Troubleshooting", hint: "Without parentheses, you're referencing the decorator, not the task instance." },
            { id: 34, q: "What does 'Latest Run' column show?", opts: ["Logical date of latest DAG run", "Interval between runs", "End date/time of most recent run", "Next scheduled run"], cat: "UI", hint: "It shows the logical_date of the most recent execution." },
            { id: 35, q: "Presto provider missing. What to do?", opts: ["Reinstall Airflow", "Restart Airflow", "Impossible", "Install the provider package"], cat: "Providers", hint: "Providers are separate packages that can be installed via pip." },
            { id: 36, q: "Best view for DAG runs and task states overview?", opts: ["Graph view", "Grid view", "DAGs view"], cat: "UI", hint: "This view shows a matrix of tasks and runs." },
            { id: 37, q: "True about DAG? (select all)", opts: ["Loops are good practice", "DAG is a programming language", "DAG = Directed Acyclic Graph", "Nodes = tasks, edges = dependencies"], cat: "Core Concepts", hint: "DAG is an acronym; loops would make it cyclic." },
            { id: 38, q: "Purpose of Airflow variable? (select all)", opts: ["Store XCom", "Reuse value across DAGs", "Store large data", "Avoid hardcoding"], cat: "Variables", hint: "Variables are for configuration values used across multiple DAGs." },
            { id: 39, q: "CLI command to run a task without dependencies?", opts: ["airflow tasks start", "airflow dags test", "airflow standalone", "airflow tasks test"], cat: "CLI", hint: "The 'test' subcommand runs tasks in isolation." },
            { id: 40, q: "What can be stored in a variable? (select all)", opts: ["Integers", "Strings", "Python Dataclasses", "JSON"], cat: "Variables", hint: "Variables support strings and can deserialize JSON." },
            { id: 41, q: "What does a Transfer Operator do?", opts: ["Moves data between systems", "Transforms data format", "Sends notifications", "Evaluates conditions"], cat: "Operators", hint: "Transfer operators move data from source to destination." },
            { id: 42, q: "Purpose of default_args?", opts: ["Specifies schedule interval", "Specifies operator to use", "Default params for one task", "Default params for all tasks"], cat: "DAG Parameters", hint: "These arguments are applied to every task in the DAG." },
            { id: 43, q: "What does a Sensor Operator do?", opts: ["Waits for a condition", "Evaluates conditions for branching", "Sends notifications", "Provides utility functions"], cat: "Sensors", hint: "Sensors wait until something becomes true." },
            { id: 44, q: "Is [t0, t1] >> t2 >> [t3, t4] >> t5 valid?", opts: ["No", "Yes"], cat: "Dependencies", hint: "Airflow allows lists on both sides of the >> operator." },
            { id: 45, q: "Jan 8 10:00, start_date Jan 5, catchup=True. How many DAG runs?", opts: ["4", "2", "1", "3"], cat: "Scheduling", hint: "Count complete intervals: 5‚Üí6, 6‚Üí7, 7‚Üí8." },
            { id: 46, q: "Optional params without @dag? (select all)", opts: ["schedule_interval", "start_date", "default_args", "dag_id"], cat: "DAG Parameters", hint: "Only one parameter is strictly required when creating a DAG." },
            { id: 47, q: "How can Airflow help build a user behavior dashboard?", opts: ["As the database", "To schedule pipelines feeding a data warehouse", "To analyze events and present dashboards", "To build dashboards in the UI"], cat: "Use Cases", hint: "Airflow orchestrates pipelines, it's not an analytics or visualization tool." },
            { id: 48, q: "Can env variable variables be accessed in DAGs even if not in UI?", opts: ["Yes", "No"], cat: "Variables", hint: "AIRFLOW_VAR_* variables work in code even if not visible in UI." },
            { id: 49, q: "Result of chain(t0, t1, [t2, t3], [t4, t5], t6)?", opts: ["chain(t0, t1, [t2, t4], [t3, t5], t6)", "t0 >> t1 >> [t2, t3] >> [t4, t5] >> t6", "chain(t0, t1, [t2, t3], [t4, t5], t6)", "[t0, t1] >> t2 >> t3 >> t4 >> [t5, t6]"], cat: "Dependencies", hint: "chain() with lists connects corresponding elements." },
            { id: 50, q: "Valid ways to create a connection? (select all)", opts: ["Airflow CLI", "In an XCom", "Airflow UI", "Environment Variables"], cat: "Connections", hint: "Connections can be created via CLI, UI, or AIRFLOW_CONN_* env vars." },
            { id: 51, q: "Best mode when poke_interval < 5 minutes?", opts: ["reschedule", "poke"], cat: "Sensors", hint: "For short intervals, keeping the worker occupied is acceptable." },
            { id: 52, q: "Which folder does the scheduler parse for DAGs?", opts: ["/plugins", "/dags", "/include", "/airflow"], cat: "Configuration", hint: "DAG files are stored in the standard /dags directory." },
            { id: 53, q: "Method to add data to XCom?", opts: ["xcom parameter of DAG", "xcom_push", "xcom_add", "xcom_pull"], cat: "XCom", hint: "The method name suggests pushing data out." },
            { id: 54, q: "What does 'queued' status mean?", opts: ["Task is running", "Task executes immediately", "Task waiting to be scheduled", "Task assigned to executor, awaiting worker"], cat: "Core Concepts", hint: "Queued tasks are waiting for an available worker." },
            { id: 55, q: "Is daily SQL aggregation a use case for Airflow?", opts: ["No", "Yes"], cat: "Use Cases", hint: "Scheduled database operations are a common Airflow use case." },
            { id: 56, q: "Purpose of PythonOperator?", opts: ["Deploy Python packages", "Execute Python code as a task", "Schedule Python scripts", "Manage virtual environments"], cat: "Operators", hint: "This operator runs a Python callable as a task." },
            { id: 57, q: "Is automated failure notification a use case for Airflow?", opts: ["No", "Yes"], cat: "Use Cases", hint: "Airflow has built-in notification capabilities." },
            { id: 58, q: "Correct env var for variable 'customer_folder'='my_folder'?", opts: ["AIRFLOW_VARIABLE_CUSTOMER_FOLDER='my_folder'", "CUSTOMER_FOLDER='my_folder'", "AIRFLOW_VAR_CUSTOMER_FOLDER='my_folder'", "AIRFLOW_CUSTOMER_FOLDER='my_folder'"], cat: "Variables", hint: "The format is AIRFLOW_VAR_ followed by uppercase variable name." },
            { id: 59, q: "Which creates t0 ‚Üí t1 ‚Üí t2 ‚Üí t3? (select all)", opts: ["t3 << t2 << t1 << t0", "t0 >> t1 >> t2 >> t3", "t0 >> [t1, t2] >> t3", "t0 >> [t1, t2, t3]"], cat: "Dependencies", hint: "Both >> and << can create the same linear dependency." },
            { id: 60, q: "CLI command showing Python version?", opts: ["airflow version", "airflow python version", "airflow info", "airflow standalone"], cat: "CLI", hint: "The info command shows environment details." },
            { id: 61, q: "Best view for understanding task dependencies?", opts: ["Graph view", "Grid view", "DAGs view"], cat: "UI", hint: "This view shows tasks as nodes and dependencies as edges." },
            { id: 62, q: "What is an Airflow provider?", opts: ["Task concurrency config", "Separate package extending Airflow", "Docker image", "Core operators"], cat: "Providers", hint: "Providers are external packages for integrations." },
            { id: 63, q: "Is SQLSensor with poke_interval=30 checking every 30 minutes?", opts: ["Yes", "No"], cat: "Sensors", hint: "poke_interval is measured in seconds, not minutes." },
            { id: 64, q: "CLI command to create the metadata database?", opts: ["airflow db start", "airflow db reset", "airflow db check", "airflow db migrate"], cat: "CLI", hint: "The migrate command creates or upgrades the database schema." },
            { id: 65, q: "Error: '_TaskDecorator' object has no attribute 'update_relative'. Solution?", opts: ["Call the task explicitly", "Change start_date format", "Import correct DAG object", "Not enough info"], cat: "Troubleshooting", hint: "You need to invoke the decorated function with parentheses." },
            { id: 66, q: "Method to get data from XCom?", opts: ["xcom_push", "xcom_add", "xcom_pull", "xcom parameter"], cat: "XCom", hint: "The method name suggests pulling data in." },
            { id: 67, q: "Is t0 >> t1 >> t2 >> t3 equivalent to t3 << t2 << t1 << t0?", opts: ["No", "Yes"], cat: "Dependencies", hint: "Both operators create the same directional dependency." },
            { id: 68, q: "Where are task dependencies set up?", opts: ["In /includes directory", "In the DAG file", "In the Airflow UI", "In a config file"], cat: "DAG Definition", hint: "Dependencies are defined in Python code." },
            { id: 69, q: "Purpose of catchup parameter?", opts: ["Determines schedule interval", "Determines future runs", "Determines retry count", "Determines retroactive runs"], cat: "DAG Parameters", hint: "Catchup controls whether Airflow runs for past intervals." },
            { id: 70, q: "Which returns 'my_json' as a Python dict?", opts: ["Variable.retrieve('my_json', deserialize_json=True)", "Variable.get('my_json', deserialize_json=True)", "Variable.retrieve('my_json', deserialize_json=False)", "Variable.get('my_json')"], cat: "Variables", hint: "Use Variable.get() with the JSON deserialization flag." },
            { id: 71, q: "Is [t0, t1] >> [t2, t3] valid?", opts: ["No", "Yes"], cat: "Dependencies", hint: "Airflow supports list-to-list dependencies." },
            { id: 72, q: "Schedule for daily at 7:00 AM?", opts: ["schedule='7 * * * *'", "schedule='0 7 * * *'", "schedule=timedelta(hours=6)", "schedule=timedelta(hours=7)"], cat: "Scheduling", hint: "Cron format: minute hour day month weekday." },
            { id: 73, q: "Default time for new DAG file to appear?", opts: ["1 minute", "30 seconds", "5 minutes", "1 second"], cat: "Configuration", hint: "dag_dir_list_interval defaults to 300 seconds." },
            { id: 74, q: "UI shows 2 DAGs but expecting 5. Why?", opts: ["5-minute delay", "A filter is applied", "30-second delay", "Airflow error"], cat: "UI", hint: "Check if any filters are active in the UI." },
            { id: 75, q: "Purpose of schedule parameter?", opts: ["When scheduling starts", "How often DAG runs", "When scheduling stops", "Timezone for DAG"], cat: "DAG Parameters", hint: "This parameter defines the run frequency." }
        ];

        let userAnswers = {};

        function renderQuestions() {
            const container = document.getElementById('questions');
            container.innerHTML = questions.map(q => `
                <div class="question" id="q-${q.id}">
                    <div class="q-meta">
                        <span class="q-num">Q${q.id}</span>
                        <span class="q-cat">${q.cat}</span>
                    </div>
                    <div class="q-text">${q.q.replace(/\n/g, '<br>')}</div>
                    <div class="options">
                        ${q.opts.map((o, i) => `
                            <label class="opt">
                                <input type="${q.opts.length > 2 ? 'checkbox' : 'radio'}" name="q${q.id}" value="${i}" onchange="record(${q.id}, ${i})">
                                ${o}
                            </label>
                        `).join('')}
                    </div>
                    <button class="hint-toggle" onclick="toggleHint(${q.id})">üí° Show Hint</button>
                    <div class="hint" id="hint-${q.id}">${q.hint}</div>
                </div>
            `).join('');
        }

        function toggleHint(id) {
            document.getElementById('hint-' + id).classList.toggle('show');
        }

        function record(qid, oid) {
            if (!userAnswers[qid]) userAnswers[qid] = [];
            const idx = userAnswers[qid].indexOf(oid);
            if (idx > -1) userAnswers[qid].splice(idx, 1);
            else userAnswers[qid].push(oid);
        }

        function submitQuiz() {
            const answered = Object.keys(userAnswers).length;
            const pct = Math.round((answered / questions.length) * 100);
            document.getElementById('score').textContent = answered + '/' + questions.length;
            document.getElementById('score-msg').textContent = 'Questions attempted. Answers available to instructors only.';
            document.getElementById('results').classList.add('show');
            window.scrollTo(0, 0);
        }

        function resetQuiz() {
            userAnswers = {};
            document.querySelectorAll('input').forEach(i => i.checked = false);
            document.getElementById('results').classList.remove('show');
            window.scrollTo(0, 0);
        }

        renderQuestions();
    </script>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </button>
    <script>
        const backToTopBtn = document.getElementById('backToTop');
        if (backToTopBtn) {
            window.addEventListener('scroll', () => {
                backToTopBtn.classList.toggle('show', window.pageYOffset > 300);
            });
        }
    </script>
</body>
</html>

